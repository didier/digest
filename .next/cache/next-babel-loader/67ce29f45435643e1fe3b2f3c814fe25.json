{"ast":null,"code":"const https = require('https');\n\nmodule.exports = (req, res) => {\n  const API_KEY = process.env.SHAREDCOUNT_API_KEY;\n  console.log(API_KEY);\n  const {\n    query: {\n      url\n    }\n  } = req;\n  https.get(`https://api.sharedcount.com/v1.0/?apikey=${API_KEY}&url=${url}`, res => {\n    let data = ''; // A chunk of data has been recieved.\n\n    res.on('data', chunk => {\n      data += chunk;\n    }); // The whole response has been received. Print out the result.\n\n    res.on('end', () => {\n      console.log(JSON.parse(data));\n    });\n  }).on(\"error\", err => {\n    console.log(\"Error: \" + err.message);\n  });\n  res.status(200).json({\n    data\n  });\n};","map":{"version":3,"sources":["/Users/didier/Projects/digest/src/pages/api/shares.js"],"names":["https","require","module","exports","req","res","API_KEY","process","env","SHAREDCOUNT_API_KEY","console","log","query","url","get","data","on","chunk","JSON","parse","err","message","status","json"],"mappings":"AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AAEAC,MAAM,CAACC,OAAP,GAAiB,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC7B,QAAMC,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYC,mBAA5B;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYL,OAAZ;AAEA,QAAM;AAAEM,IAAAA,KAAK,EAAE;AAAEC,MAAAA;AAAF;AAAT,MAAqBT,GAA3B;AAEAJ,EAAAA,KAAK,CAACc,GAAN,CAAW,4CAA2CR,OAAQ,QAAOO,GAAI,EAAzE,EAA6ER,GAAD,IAAS;AACnF,QAAIU,IAAI,GAAG,EAAX,CADmF,CAGnF;;AACAV,IAAAA,GAAG,CAACW,EAAJ,CAAO,MAAP,EAAgBC,KAAD,IAAW;AACxBF,MAAAA,IAAI,IAAIE,KAAR;AACD,KAFD,EAJmF,CAQnF;;AACAZ,IAAAA,GAAG,CAACW,EAAJ,CAAO,KAAP,EAAc,MAAM;AAClBN,MAAAA,OAAO,CAACC,GAAR,CAAYO,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAAZ;AACD,KAFD;AAID,GAbD,EAaGC,EAbH,CAaM,OAbN,EAagBI,GAAD,IAAS;AACtBV,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAYS,GAAG,CAACC,OAA5B;AACD,GAfD;AAgBAhB,EAAAA,GAAG,CAACiB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAER,IAAAA;AAAF,GAArB;AACD,CAvBD","sourcesContent":["const https = require('https');\n\nmodule.exports = (req, res) => {\n  const API_KEY = process.env.SHAREDCOUNT_API_KEY\n  console.log(API_KEY);\n\n  const { query: { url } } = req\n\n  https.get(`https://api.sharedcount.com/v1.0/?apikey=${API_KEY}&url=${url}`, (res) => {\n    let data = '';\n\n    // A chunk of data has been recieved.\n    res.on('data', (chunk) => {\n      data += chunk;\n    });\n\n    // The whole response has been received. Print out the result.\n    res.on('end', () => {\n      console.log(JSON.parse(data));\n    });\n\n  }).on(\"error\", (err) => {\n    console.log(\"Error: \" + err.message);\n  });\n  res.status(200).json({ data })\n}\n\n"]},"metadata":{},"sourceType":"script"}