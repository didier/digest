{"ast":null,"code":"const https = require('https');\n\nmodule.exports = (NOW_REQ, NOW_RES) => {\n  const API_KEY = process.env.SHAREDCOUNT_API_KEY;\n  console.log(API_KEY);\n  const {\n    query: {\n      url\n    }\n  } = NOW_REQ;\n  https.get(`https://api.sharedcount.com/v1.0/?apikey=${API_KEY}&url=${url}`, res => {\n    let data = ''; // A chunk of data has been recieved.\n\n    res.on('data', chunk => {\n      data += chunk;\n    }); // The whole response has been received. Print out the result.\n\n    res.on('end', () => {\n      console.log(JSON.parse(data));\n      NOW_RES.status(200).json(data);\n    });\n  }).on(\"error\", err => {\n    console.log(\"Error: \" + err.message);\n  });\n};","map":{"version":3,"sources":["/Users/didier/Projects/digest/src/pages/api/shares.js"],"names":["https","require","module","exports","NOW_REQ","NOW_RES","API_KEY","process","env","SHAREDCOUNT_API_KEY","console","log","query","url","get","res","data","on","chunk","JSON","parse","status","json","err","message"],"mappings":"AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AAEAC,MAAM,CAACC,OAAP,GAAiB,CAACC,OAAD,EAAUC,OAAV,KAAsB;AACrC,QAAMC,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYC,mBAA5B;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYL,OAAZ;AAEA,QAAM;AAAEM,IAAAA,KAAK,EAAE;AAAEC,MAAAA;AAAF;AAAT,MAAqBT,OAA3B;AAEAJ,EAAAA,KAAK,CAACc,GAAN,CAAW,4CAA2CR,OAAQ,QAAOO,GAAI,EAAzE,EAA6EE,GAAD,IAAS;AACnF,QAAIC,IAAI,GAAG,EAAX,CADmF,CAGnF;;AACAD,IAAAA,GAAG,CAACE,EAAJ,CAAO,MAAP,EAAgBC,KAAD,IAAW;AACxBF,MAAAA,IAAI,IAAIE,KAAR;AACD,KAFD,EAJmF,CAQnF;;AACAH,IAAAA,GAAG,CAACE,EAAJ,CAAO,KAAP,EAAc,MAAM;AAClBP,MAAAA,OAAO,CAACC,GAAR,CAAYQ,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAAZ;AACAX,MAAAA,OAAO,CAACgB,MAAR,CAAe,GAAf,EAAoBC,IAApB,CAAyBN,IAAzB;AACD,KAHD;AAKD,GAdD,EAcGC,EAdH,CAcM,OAdN,EAcgBM,GAAD,IAAS;AACtBb,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAYY,GAAG,CAACC,OAA5B;AACD,GAhBD;AAiBD,CAvBD","sourcesContent":["const https = require('https');\n\nmodule.exports = (NOW_REQ, NOW_RES) => {\n  const API_KEY = process.env.SHAREDCOUNT_API_KEY\n  console.log(API_KEY);\n\n  const { query: { url } } = NOW_REQ\n\n  https.get(`https://api.sharedcount.com/v1.0/?apikey=${API_KEY}&url=${url}`, (res) => {\n    let data = '';\n\n    // A chunk of data has been recieved.\n    res.on('data', (chunk) => {\n      data += chunk;\n    });\n\n    // The whole response has been received. Print out the result.\n    res.on('end', () => {\n      console.log(JSON.parse(data));\n      NOW_RES.status(200).json(data)\n    });\n\n  }).on(\"error\", (err) => {\n    console.log(\"Error: \" + err.message);\n  });\n}\n\n"]},"metadata":{},"sourceType":"script"}