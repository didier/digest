{"ast":null,"code":"module.exports = (req, res) => {\n  const API_KEY = process.env.SHAREDCOUNT_API_KEY;\n  const {\n    query: {\n      url\n    }\n  } = req;\n\n  if (url !== '') {\n    let shares = {};\n    fetch(`https://api.sharedcount.com/v1.0/?apikey=${API_KEY}&url=${url}`).then(res => res.json()).then(result => {\n      // console.log(result);\n      // setIsLoaded(true);\n      shares = result; // setItems(result);\n      // setShares(items.Facebook + items.Pinterest)\n    }, // Note: it's important to handle errors here\n    // instead of a catch() block so that we don't swallow\n    // exceptions from actual bugs in components.\n    error => {\n      // setIsLoaded(true);\n      // setError(error);\n      throw new Error(error);\n    });\n  }\n\n  res.status(200).json({\n    shares\n  });\n};","map":{"version":3,"sources":["/Users/didier/Projects/digest/src/pages/api/shares.js"],"names":["module","exports","req","res","API_KEY","process","env","SHAREDCOUNT_API_KEY","query","url","shares","fetch","then","json","result","error","Error","status"],"mappings":"AAAAA,MAAM,CAACC,OAAP,GAAiB,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC7B,QAAMC,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYC,mBAA5B;AAEA,QAAM;AAAEC,IAAAA,KAAK,EAAE;AAAEC,MAAAA;AAAF;AAAT,MAAqBP,GAA3B;;AACA,MAAIO,GAAG,KAAK,EAAZ,EAAgB;AAEd,QAAIC,MAAM,GAAG,EAAb;AAEAC,IAAAA,KAAK,CAAE,4CAA2CP,OAAQ,QAAOK,GAAI,EAAhE,CAAL,CACGG,IADH,CACQT,GAAG,IAAIA,GAAG,CAACU,IAAJ,EADf,EAEGD,IAFH,CAGKE,MAAD,IAAY;AACV;AAEA;AACAJ,MAAAA,MAAM,GAAGI,MAAT,CAJU,CAKV;AACA;AACD,KAVL,EAWI;AACA;AACA;AACCC,IAAAA,KAAD,IAAW;AACT;AACA;AACA,YAAM,IAAIC,KAAJ,CAAUD,KAAV,CAAN;AACD,KAlBL;AAoBD;;AAIDZ,EAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBJ,IAAhB,CAAqB;AAAEH,IAAAA;AAAF,GAArB;AACD,CAjCD","sourcesContent":["module.exports = (req, res) => {\n  const API_KEY = process.env.SHAREDCOUNT_API_KEY\n\n  const { query: { url } } = req\n  if (url !== '') {\n\n    let shares = {}\n\n    fetch(`https://api.sharedcount.com/v1.0/?apikey=${API_KEY}&url=${url}`)\n      .then(res => res.json())\n      .then(\n        (result) => {\n          // console.log(result);\n\n          // setIsLoaded(true);\n          shares = result\n          // setItems(result);\n          // setShares(items.Facebook + items.Pinterest)\n        },\n        // Note: it's important to handle errors here\n        // instead of a catch() block so that we don't swallow\n        // exceptions from actual bugs in components.\n        (error) => {\n          // setIsLoaded(true);\n          // setError(error);\n          throw new Error(error)\n        }\n      )\n  }\n\n\n\n  res.status(200).json({ shares })\n}\n"]},"metadata":{},"sourceType":"script"}